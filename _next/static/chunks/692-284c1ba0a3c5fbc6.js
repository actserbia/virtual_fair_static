"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{5320:function(e,t,n){let r,o,i,s;n.d(t,{u:function(){return ex}});var a=n(3428),l=n(7890),u=n(2265),c=n(6375);let f=2,d=new c.Vector3,p=new c.Vector3,h=new c.Vector3,y=new c.Vector2,m=new c.Vector2,g=new c.Vector2,x=new c.Vector3;function b(e,t,n,r,o){let i=3*r,s=e.index.getX(i),a=e.index.getX(i+1),l=e.index.getX(i+2),u=function(e,t,n,r,o,i,s){d.fromBufferAttribute(t,r),p.fromBufferAttribute(t,o),h.fromBufferAttribute(t,i);let a=null===(s===c.BackSide?e.intersectTriangle(h,p,d,!0,x):e.intersectTriangle(d,p,h,s!==c.DoubleSide,x))?null:{distance:e.origin.distanceTo(x),point:x.clone()};if(a){n&&(y.fromBufferAttribute(n,r),m.fromBufferAttribute(n,o),g.fromBufferAttribute(n,i),a.uv=c.Triangle.getUV(x,d,p,h,y,m,g,new c.Vector2));let e={a:r,b:o,c:i,normal:new c.Vector3,materialIndex:0};c.Triangle.getNormal(d,p,h,e.normal),a.face=e,a.faceIndex=r}return a}(n,e.attributes.position,e.attributes.uv,s,a,l,t);return u?(u.faceIndex=r,o&&o.push(u),u):null}function w(e,t,n){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(n.ray.origin),e.object=t,e.distance<n.near||e.distance>n.far)?null:e}class P{constructor(){}}function v(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function T(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){let o=e[r+3]-e[r];o>n&&(n=o,t=r)}return t}function B(e,t,n){let r,o;for(let i=0;i<3;i++){let s=i+3;r=e[i],o=t[i],n[i]=r<o?r:o,r=e[s],o=t[s],n[s]=r>o?r:o}}function M(e,t,n){for(let r=0;r<3;r++){let o=t[e+2*r],i=t[e+2*r+1],s=o-i,a=o+i;s<n[r]&&(n[r]=s),a>n[r+3]&&(n[r+3]=a)}}function S(e){let t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}function _(e,t,n,r,o=null){let i=1/0,s=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0,f=1/0,d=1/0,p=1/0,h=-1/0,y=-1/0,m=-1/0,g=null!==o;for(let r=6*t,o=(t+n)*6;r<o;r+=6){let t=e[r+0],n=e[r+1],o=t-n,x=t+n;o<i&&(i=o),x>l&&(l=x),g&&t<f&&(f=t),g&&t>h&&(h=t);let b=e[r+2],w=e[r+3],P=b-w,v=b+w;P<s&&(s=P),v>u&&(u=v),g&&b<d&&(d=b),g&&b>y&&(y=b);let T=e[r+4],B=e[r+5],M=T-B,S=T+B;M<a&&(a=M),S>c&&(c=S),g&&T<p&&(p=T),g&&T>m&&(m=T)}r[0]=i,r[1]=s,r[2]=a,r[3]=l,r[4]=u,r[5]=c,g&&(o[0]=f,o[1]=d,o[2]=p,o[3]=h,o[4]=y,o[5]=m)}let A=(e,t)=>e.candidate-t.candidate,R=Array(32).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),O=new Float32Array(6);class E{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let o=0,i=e.length;o<i;o++){let i=e[o][t];n=i<n?i:n,r=i>r?i:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let o=0,i=t.length;o<i;o++){let i=t[o],s=e.dot(i);n=s<n?s:n,r=s>r?s:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}E.prototype.setFromBox=function(){let e=new c.Vector3;return function(t,n){let r=n.min,o=n.max,i=1/0,s=-1/0;for(let n=0;n<=1;n++)for(let a=0;a<=1;a++)for(let l=0;l<=1;l++){e.x=r.x*n+o.x*(1-n),e.y=r.y*a+o.y*(1-a),e.z=r.z*l+o.z*(1-l);let u=t.dot(e);i=Math.min(u,i),s=Math.max(u,s)}this.min=i,this.max=s}}(),new E;let j=function(){let e=new c.Vector3,t=new c.Vector3,n=new c.Vector3;return function(r,o,i){let s,a;let l=r.start,u=o.start;n.subVectors(l,u),e.subVectors(r.end,r.start),t.subVectors(o.end,o.start);let c=n.dot(t),f=t.dot(e),d=t.dot(t),p=n.dot(e),h=e.dot(e)*d-f*f;s=0!==h?(c*f-p*d)/h:0,a=(c+s*f)/d,i.x=s,i.y=a}}(),U=function(){let e=new c.Vector2,t=new c.Vector3,n=new c.Vector3;return function(r,o,i,s){j(r,o,e);let a=e.x,l=e.y;if(a>=0&&a<=1&&l>=0&&l<=1){r.at(a,i),o.at(l,s);return}if(a>=0&&a<=1){l<0?o.at(0,s):o.at(1,s),r.closestPointToPoint(s,!0,i);return}if(l>=0&&l<=1){a<0?r.at(0,i):r.at(1,i),o.closestPointToPoint(i,!0,s);return}{let e,u;if(e=a<0?r.start:r.end,u=l<0?o.start:o.end,r.closestPointToPoint(u,!0,t),o.closestPointToPoint(e,!0,n),t.distanceToSquared(u)<=n.distanceToSquared(e)){i.copy(t),s.copy(u);return}i.copy(e),s.copy(n);return}}}(),V=function(){let e=new c.Vector3,t=new c.Vector3,n=new c.Plane,r=new c.Line3;return function(o,i){let{radius:s,center:a}=o,{a:l,b:u,c}=i;if(r.start=l,r.end=u,r.closestPointToPoint(a,!0,e).distanceTo(a)<=s||(r.start=l,r.end=c,r.closestPointToPoint(a,!0,e).distanceTo(a)<=s)||(r.start=u,r.end=c,r.closestPointToPoint(a,!0,e).distanceTo(a)<=s))return!0;let f=i.getPlane(n);if(Math.abs(f.distanceToPoint(a))<=s){let e=f.projectPoint(a,t);if(i.containsPoint(e))return!0}return!1}}();function C(e){return 1e-15>Math.abs(e)}class I extends c.Triangle{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=[,,,,].fill().map(()=>new c.Vector3),this.satBounds=[,,,,].fill().map(()=>new E),this.points=[this.a,this.b,this.c],this.sphere=new c.Sphere,this.plane=new c.Plane,this.needsUpdate=!0}intersectsSphere(e){return V(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,o=this.satAxes,i=this.satBounds,s=o[0],a=i[0];this.getNormal(s),a.setFromPoints(s,r);let l=o[1],u=i[1];l.subVectors(e,t),u.setFromPoints(l,r);let c=o[2],f=i[2];c.subVectors(t,n),f.setFromPoints(c,r);let d=o[3],p=i[3];d.subVectors(n,e),p.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}}I.prototype.closestPointToSegment=function(){let e=new c.Vector3,t=new c.Vector3,n=new c.Line3;return function(r,o=null,i=null){let s;let{start:a,end:l}=r,u=this.points,c=1/0;for(let a=0;a<3;a++){let l=(a+1)%3;n.start.copy(u[a]),n.end.copy(u[l]),U(n,r,e,t),(s=e.distanceToSquared(t))<c&&(c=s,o&&o.copy(e),i&&i.copy(t))}return this.closestPointToPoint(a,e),(s=a.distanceToSquared(e))<c&&(c=s,o&&o.copy(e),i&&i.copy(a)),this.closestPointToPoint(l,e),(s=l.distanceToSquared(e))<c&&(c=s,o&&o.copy(e),i&&i.copy(l)),Math.sqrt(c)}}(),I.prototype.intersectsTriangle=function(){let e=new I,t=[,,,],n=[,,,],r=new E,o=new E,i=new c.Vector3,s=new c.Vector3,a=new c.Vector3,l=new c.Vector3,u=new c.Line3,f=new c.Line3,d=new c.Line3;return function(c,p=null,h=!1){this.needsUpdate&&this.update(),c.isExtendedTriangle?c.needsUpdate&&c.update():(e.copy(c),e.update(),c=e);let y=this.plane,m=c.plane;if(Math.abs(y.normal.dot(m.normal))>1-1e-10){let e=this.satBounds,s=this.satAxes;n[0]=c.a,n[1]=c.b,n[2]=c.c;for(let t=0;t<4;t++){let o=e[t],i=s[t];if(r.setFromPoints(i,n),o.isSeparated(r))return!1}let a=c.satBounds,l=c.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let e=0;e<4;e++){let n=a[e],o=l[e];if(r.setFromPoints(o,t),n.isSeparated(r))return!1}for(let e=0;e<4;e++){let a=s[e];for(let e=0;e<4;e++){let s=l[e];if(i.crossVectors(a,s),r.setFromPoints(i,t),o.setFromPoints(i,n),r.isSeparated(o))return!1}}return p&&(h||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}{let e=this.points,t=!1,n=0;for(let r=0;r<3;r++){let o=e[r],i=e[(r+1)%3];u.start.copy(o),u.end.copy(i),u.delta(s);let a=t?f.start:f.end,l=C(m.distanceToPoint(o));if(C(m.normal.dot(s))&&l){f.copy(u),n=2;break}if((m.intersectLine(u,a)||l)&&!C(a.distanceTo(i))){if(n++,t)break;t=!0}}if(1===n&&c.containsPoint(f.end))return p&&(p.start.copy(f.end),p.end.copy(f.end)),!0;if(2!==n)return!1;let r=c.points,o=!1,i=0;for(let e=0;e<3;e++){let t=r[e],n=r[(e+1)%3];u.start.copy(t),u.end.copy(n),u.delta(a);let s=o?d.start:d.end,l=C(y.distanceToPoint(t));if(C(y.normal.dot(a))&&l){d.copy(u),i=2;break}if((y.intersectLine(u,s)||l)&&!C(s.distanceTo(n))){if(i++,o)break;o=!0}}if(1===i&&this.containsPoint(d.end))return p&&(p.start.copy(d.end),p.end.copy(d.end)),!0;if(2!==i)return!1;if(f.delta(s),d.delta(a),0>s.dot(a)){let e=d.start;d.start=d.end,d.end=e}let h=f.start.dot(s),g=f.end.dot(s),x=d.start.dot(s),b=d.end.dot(s);return(h===b||x===g||g<x!=h<b)&&(p&&(l.subVectors(f.start,d.start),l.dot(s)>0?p.start.copy(f.start):p.start.copy(d.start),l.subVectors(f.end,d.end),0>l.dot(s)?p.end.copy(f.end):p.end.copy(d.end)),!0)}}}(),I.prototype.distanceToPoint=function(){let e=new c.Vector3;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),I.prototype.distanceToTriangle=function(){let e=new c.Vector3,t=new c.Vector3,n=["a","b","c"],r=new c.Line3,o=new c.Line3;return function(i,s=null,a=null){let l=s||a?r:null;if(this.intersectsTriangle(i,l))return(s||a)&&(s&&l.getCenter(s),a&&l.getCenter(a)),0;let u=1/0;for(let t=0;t<3;t++){let r;let o=n[t],l=i[o];this.closestPointToPoint(l,e),(r=l.distanceToSquared(e))<u&&(u=r,s&&s.copy(e),a&&a.copy(l));let c=this[o];i.closestPointToPoint(c,e),(r=c.distanceToSquared(e))<u&&(u=r,s&&s.copy(c),a&&a.copy(e))}for(let l=0;l<3;l++){let c=n[l],f=n[(l+1)%3];r.set(this[c],this[f]);for(let l=0;l<3;l++){let c=n[l],f=n[(l+1)%3];o.set(i[c],i[f]),U(r,o,e,t);let d=e.distanceToSquared(t);d<u&&(u=d,s&&s.copy(e),a&&a.copy(t))}}return Math.sqrt(u)}}();class F{constructor(e,t,n){this.isOrientedBox=!0,this.min=new c.Vector3,this.max=new c.Vector3,this.matrix=new c.Matrix4,this.invMatrix=new c.Matrix4,this.points=Array(8).fill().map(()=>new c.Vector3),this.satAxes=[,,,].fill().map(()=>new c.Vector3),this.satBounds=[,,,].fill().map(()=>new E),this.alignedSatBounds=[,,,].fill().map(()=>new E),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}function N(e,t,n,r){let o=e.a,i=e.b,s=e.c,a=t,l=t+1,u=t+2;n&&(a=n.getX(t),l=n.getX(t+1),u=n.getX(t+2)),o.x=r.getX(a),o.y=r.getY(a),o.z=r.getZ(a),i.x=r.getX(l),i.y=r.getY(l),i.z=r.getZ(l),s.x=r.getX(u),s.y=r.getY(u),s.z=r.getZ(u)}function k(e,t,n,r,o,i,s){let a=n.index,l=n.attributes.position;for(let n=e,u=t+e;n<u;n++)if(N(s,3*n,a,l),s.needsUpdate=!0,r(s,n,o,i))return!0;return!1}F.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,r=this.points;for(let o=0;o<=1;o++)for(let i=0;i<=1;i++)for(let s=0;s<=1;s++){let a=r[1*o|2*i|4*s];a.x=o?n.x:t.x,a.y=i?n.y:t.y,a.z=s?n.z:t.z,a.applyMatrix4(e)}let o=this.satBounds,i=this.satAxes,s=r[0];for(let e=0;e<3;e++){let t=i[e],n=o[e],a=r[1<<e];t.subVectors(s,a),n.setFromPoints(t,r)}let a=this.alignedSatBounds;a[0].setFromPointsField(r,"x"),a[1].setFromPointsField(r,"y"),a[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},F.prototype.intersectsBox=function(){let e=new E;return function(t){this.needsUpdate&&this.update();let n=t.min,r=t.max,o=this.satBounds,i=this.satAxes,s=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,s[0].isSeparated(e)||(e.min=n.y,e.max=r.y,s[1].isSeparated(e))||(e.min=n.z,e.max=r.z,s[2].isSeparated(e)))return!1;for(let n=0;n<3;n++){let r=i[n],s=o[n];if(e.setFromBox(r,t),s.isSeparated(e))return!1}return!0}}(),F.prototype.intersectsTriangle=function(){let e=new I,t=[,,,],n=new E,r=new E,o=new c.Vector3;return function(i){this.needsUpdate&&this.update(),i.isExtendedTriangle?i.needsUpdate&&i.update():(e.copy(i),e.update(),i=e);let s=this.satBounds,a=this.satAxes;t[0]=i.a,t[1]=i.b,t[2]=i.c;for(let e=0;e<3;e++){let r=s[e],o=a[e];if(n.setFromPoints(o,t),r.isSeparated(n))return!1}let l=i.satBounds,u=i.satAxes,c=this.points;for(let e=0;e<3;e++){let t=l[e],r=u[e];if(n.setFromPoints(r,c),t.isSeparated(n))return!1}for(let e=0;e<3;e++){let i=a[e];for(let e=0;e<4;e++){let s=u[e];if(o.crossVectors(i,s),n.setFromPoints(o,t),r.setFromPoints(o,c),n.isSeparated(r))return!1}}return!0}}(),F.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},F.prototype.distanceToPoint=function(){let e=new c.Vector3;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),F.prototype.distanceToBox=function(){let e=["x","y","z"],t=Array(12).fill().map(()=>new c.Line3),n=Array(12).fill().map(()=>new c.Line3),r=new c.Vector3,o=new c.Vector3;return function(i,s=0,a=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(i))return(a||l)&&(i.getCenter(o),this.closestPointToPoint(o,r),i.closestPointToPoint(r,o),a&&a.copy(r),l&&l.copy(o)),0;let u=s*s,c=i.min,f=i.max,d=this.points,p=1/0;for(let e=0;e<8;e++){let t=d[e];o.copy(t).clamp(c,f);let n=t.distanceToSquared(o);if(n<p&&(p=n,a&&a.copy(t),l&&l.copy(o),n<u))return Math.sqrt(n)}let h=0;for(let r=0;r<3;r++)for(let o=0;o<=1;o++)for(let i=0;i<=1;i++){let s=(r+1)%3,a=(r+2)%3,l=o<<s|i<<a,u=1<<r|o<<s|i<<a,p=d[l],y=d[u];t[h].set(p,y);let m=e[r],g=e[s],x=e[a],b=n[h],w=b.start,P=b.end;w[m]=c[m],w[g]=o?c[g]:f[g],w[x]=i?c[x]:f[g],P[m]=f[m],P[g]=o?c[g]:f[g],P[x]=i?c[x]:f[g],h++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){o.x=e?f.x:c.x,o.y=t?f.y:c.y,o.z=n?f.z:c.z,this.closestPointToPoint(o,r);let i=o.distanceToSquared(r);if(i<p&&(p=i,a&&a.copy(r),l&&l.copy(o),i<u))return Math.sqrt(i)}for(let e=0;e<12;e++){let i=t[e];for(let e=0;e<12;e++){U(i,n[e],r,o);let t=r.distanceToSquared(o);if(t<p&&(p=t,a&&a.copy(r),l&&l.copy(o),t<u))return Math.sqrt(t)}}return Math.sqrt(p)}}();class L{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function z(e,t){return 65535===t[e+15]}let q=new c.Box3,D=new c.Vector3,W=["x","y","z"],H=function(){let e,t;let n=[],r=new L(()=>new c.Box3);return function(...a){e=r.getPrimitive(),t=r.getPrimitive(),n.push(e,t);let l=function n(r,a,l,u,c=null,f=0,d=0){function p(e){let t=2*e,n=i,r=s;for(;!z(t,n);)e+=8,t=2*e;return r[e+6]}function h(e){let t=2*e,n=i,r=s;for(;!z(t,n);)t=2*(e=r[e+6]);return r[e+6]+n[t+14]}let y=2*r,m=o,g=i,x=s;if(z(y,g)){let t=x[r+6],n=g[y+14];return v(r,m,e),u(t,n,!1,d,f+r,e)}{let o,i,s,y,b,w;let P=r+8,T=x[r+6],B=P,M=T;if(c&&(s=e,y=t,v(B,m,s),v(M,m,y),o=c(s),(i=c(y))<o)){B=T,M=P;let e=o;o=i,i=e,s=y}s||v(B,m,s=e);let S=l(s,z(2*B,g),o,d+1,f+B);if(2===S){let e=p(B);b=u(e,h(B)-e,!0,d+1,f+B,s)}else b=S&&n(B,a,l,u,c,f,d+1);if(b)return!0;v(M,m,y=t);let _=l(y,z(2*M,g),i,d+1,f+M);if(2===_){let e=p(M);w=u(e,h(M)-e,!0,d+1,f+M,y)}else w=_&&n(M,a,l,u,c,f,d+1);return!!w}}(...a);r.releasePrimitive(e),r.releasePrimitive(t),n.pop(),n.pop();let u=n.length;return u>0&&(t=n[u-1],e=n[u-2]),l}}(),K=function(){let e=new I,t=new I,n=new c.Matrix4,r=new F,a=new F;return function l(u,c,f,d,p=null){let h=2*u,y=o,m=i,g=s;if(null===p&&(f.boundingBox||f.computeBoundingBox(),r.set(f.boundingBox.min,f.boundingBox.max,d),p=r),z(h,m)){let r=c.index,o=c.attributes.position,i=f.index,s=f.attributes.position,l=g[u+6],p=m[h+14];if(n.copy(d).invert(),f.boundsTree)return v(u,y,a),a.matrix.copy(n),a.needsUpdate=!0,f.boundsTree.shapecast({intersectsBounds:e=>a.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(d),e.b.applyMatrix4(d),e.c.applyMatrix4(d),e.needsUpdate=!0;for(let n=3*l,i=(p+l)*3;n<i;n+=3)if(N(t,n,r,o),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});for(let a=3*l,u=p+3*l;a<u;a+=3){N(e,a,r,o),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(let n=0,r=i.count;n<r;n+=3)if(N(t,n,i,s),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let e=u+8,t=g[u+6];return v(e,y,q),!!(p.intersectsBox(q)&&l(e,c,f,d,p))||(v(t,y,q),!!(p.intersectsBox(q)&&l(t,c,f,d,p)))}}}();function X(e,t,n,r){return v(e,t,q),n.intersectBox(q,r)}let Y=[];function $(e){r&&Y.push(r),r=e,o=new Float32Array(e),i=new Uint16Array(e),s=new Uint32Array(e)}function Z(){r=null,o=null,i=null,s=null,Y.length&&$(Y.pop())}let G=Symbol("skip tree generation"),Q=new c.Box3,J=new c.Box3,ee=new c.Matrix4,et=new F,en=new F,er=new c.Vector3,eo=new c.Vector3,ei=new c.Vector3,es=new c.Vector3,ea=new c.Vector3,el=new c.Box3,eu=new L(()=>new I);class ec{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),ec.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t={cloneBuffers:!0,...t};let n=e.geometry,r=e._roots,o=n.getIndex();return t.cloneBuffers?{roots:r.map(e=>e.slice()),index:o.array.slice()}:{roots:r,index:o.array}}static deserialize(e,t,n={}){if("boolean"==typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),ec.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};let{index:r,roots:o}=e,i=new ec(t,{...n,[G]:!0});if(i._roots=o,n.setIndex){let n=t.getIndex();if(null===n){let n=new c.BufferAttribute(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return i}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw Error("MeshBVH: Only BufferGeometries are supported.");if((t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[G]:!1},t)).useSharedArrayBuffer&&"undefined"==typeof SharedArrayBuffer)throw Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[G]||(this._roots=function(e,t){let n,r,o;let i=function(e,t){function n(e){h&&h(e/y)}function r(t,o,c,h=null,y=0){if(!m&&y>=l&&(m=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),c<=d||y>=l)return n(o+c),t.offset=o,t.count=c,t;let g=function(e,t,n,r,o,i){let s=-1,a=0;if(0===i)-1!==(s=T(t))&&(a=(t[s]+t[s+3])/2);else if(1===i)-1!==(s=T(e))&&(a=function(e,t,n,r){let o=0;for(let i=t,s=t+n;i<s;i++)o+=e[6*i+2*r];return o/n}(n,r,o,s));else if(i===f){let i=S(e),l=1.25*o,u=6*r,c=(r+o)*6;for(let e=0;e<3;e++){let r=t[e],f=(t[e+3]-r)/32;if(o<8){let t=[...R];t.length=o;let r=0;for(let o=u;o<c;o+=6,r++){let i=t[r];i.candidate=n[o+2*e],i.count=0;let{bounds:s,leftCacheBounds:a,rightCacheBounds:l}=i;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0;M(o,n,s)}t.sort(A);let f=o;for(let e=0;e<f;e++){let n=t[e];for(;e+1<f&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),f--}for(let r=u;r<c;r+=6){let o=n[r+2*e];for(let e=0;e<f;e++){let i=t[e];o>=i.candidate?M(r,n,i.rightCacheBounds):(M(r,n,i.leftCacheBounds),i.count++)}}for(let n=0;n<f;n++){let r=t[n],u=r.count,c=o-r.count,f=r.leftCacheBounds,d=r.rightCacheBounds,p=0;0!==u&&(p=S(f)/i);let h=0;0!==c&&(h=S(d)/i);let y=1+1.25*(p*u+h*c);y<l&&(s=e,l=y,a=r.candidate)}}else{for(let e=0;e<32;e++){let t=R[e];t.count=0,t.candidate=r+f+e*f;let n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let t=u;t<c;t+=6){let o=~~((n[t+2*e]-r)/f);o>=32&&(o=31);let i=R[o];i.count++,M(t,n,i.bounds)}let t=R[31];!function(e,t){t.set(e)}(t.bounds,t.rightCacheBounds);for(let e=30;e>=0;e--){let t=R[e],n=R[e+1];B(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let d=0;for(let t=0;t<31;t++){let n=R[t],r=n.count,u=n.bounds,c=R[t+1].rightCacheBounds;0!==r&&(0===d?function(e,t){t.set(e)}(u,O):B(u,O,O));let f=0,p=0;0!==(d+=r)&&(f=S(O)/i);let h=o-d;0!==h&&(p=S(c)/i);let y=1+1.25*(f*d+p*h);y<l&&(s=e,l=y,a=n.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${i} used.`);return{axis:s,pos:a}}(t.boundingData,h,s,o,c,p);if(-1===g.axis)return n(o+c),t.offset=o,t.count=c,t;let x=function(e,t,n,r,o){let i=n,s=n+r-1,a=o.pos,l=2*o.axis;for(;;){for(;i<=s&&t[6*i+l]<a;)i++;for(;i<=s&&t[6*s+l]>=a;)s--;if(!(i<s))return i;for(let n=0;n<3;n++){let r=e[3*i+n];e[3*i+n]=e[3*s+n],e[3*s+n]=r;let o=t[6*i+2*n+0];t[6*i+2*n+0]=t[6*s+2*n+0],t[6*s+2*n+0]=o;let a=t[6*i+2*n+1];t[6*i+2*n+1]=t[6*s+2*n+1],t[6*s+2*n+1]=a}i++,s--}}(a,s,o,c,g);if(x===o||x===o+c)n(o+c),t.offset=o,t.count=c;else{t.splitAxis=g.axis;let e=new P,n=x-o;t.left=e,e.boundingData=new Float32Array(6),_(s,o,n,e.boundingData,i),r(e,o,n,i,y+1);let a=new P,l=c-n;t.right=a,a.boundingData=new Float32Array(6),_(s,x,l,a.boundingData,i),r(a,x,l,i,y+1)}return t}!function(e,t){if(!e.index){let n;let r=e.attributes.position.count,o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;n=r>65535?new Uint32Array(new o(4*r)):new Uint16Array(new o(2*r)),e.setIndex(new c.BufferAttribute(n,1));for(let e=0;e<r;e++)n[e]=e}}(e,t);let o=new Float32Array(6),i=new Float32Array(6),s=function(e,t){let n=e.attributes.position,r=e.index.array,o=r.length/3,i=new Float32Array(6*o),s=n.normalized,a=n.array,l=n.offset||0,u=3;n.isInterleavedBufferAttribute&&(u=n.data.stride);let c=["getX","getY","getZ"];for(let e=0;e<o;e++){let o,f,d;let p=3*e,h=6*e;s?(o=r[p+0],f=r[p+1],d=r[p+2]):(o=r[p+0]*u+l,f=r[p+1]*u+l,d=r[p+2]*u+l);for(let e=0;e<3;e++){let r,l,u;s?(r=n[c[e]](o),l=n[c[e]](f),u=n[c[e]](d)):(r=a[o+e],l=a[f+e],u=a[d+e]);let p=r;l<p&&(p=l),u<p&&(p=u);let y=r;l>y&&(y=l),u>y&&(y=u);let m=(y-p)/2,g=2*e;i[h+g+0]=p+m,i[h+g+1]=m+(Math.abs(p)+m)*5960464477539063e-23,p<t[e]&&(t[e]=p),y>t[e+3]&&(t[e+3]=y)}}return i}(e,o),a=e.index.array,l=t.maxDepth,u=t.verbose,d=t.maxLeafTris,p=t.strategy,h=t.onProgress,y=e.index.count/3,m=!1,g=[],x=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],n=new Set;for(let t of e.groups)n.add(t.start),n.add(t.start+t.count);let r=Array.from(n.values()).sort((e,t)=>e-t);for(let e=0;e<r.length-1;e++){let n=r[e],o=r[e+1];t.push({offset:n/3,count:(o-n)/3})}return t}(e);if(1===x.length){let e=x[0],t=new P;t.boundingData=o,function(e,t,n,r){let o=1/0,i=1/0,s=1/0,a=-1/0,l=-1/0,u=-1/0;for(let r=6*t,c=(t+n)*6;r<c;r+=6){let t=e[r+0];t<o&&(o=t),t>a&&(a=t);let n=e[r+2];n<i&&(i=n),n>l&&(l=n);let c=e[r+4];c<s&&(s=c),c>u&&(u=c)}r[0]=o,r[1]=i,r[2]=s,r[3]=a,r[4]=l,r[5]=u}(s,e.offset,e.count,i),r(t,e.offset,e.count,i),g.push(t)}else for(let e of x){let t=new P;t.boundingData=new Float32Array(6),_(s,e.offset,e.count,t.boundingData,i),r(t,e.offset,e.count,i),g.push(t)}return g}(e,t),s=[],a=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let e=0;e<i.length;e++){let t=i[e],l=new a(32*function e(t){return t.count?1:1+e(t.left)+e(t.right)}(t));n=new Float32Array(l),r=new Uint32Array(l),o=new Uint16Array(l),function e(t,i){let s=t/4,a=t/2,l=!!i.count,u=i.boundingData;for(let e=0;e<6;e++)n[s+e]=u[e];if(l){let e=i.offset,n=i.count;return r[s+6]=e,o[a+14]=n,o[a+15]=65535,t+32}{let n;let o=i.left,a=i.right,l=i.splitAxis;if((n=e(t+32,o))/4>4294967296)throw Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[s+6]=n/4,n=e(n,a),r[s+7]=l,n}}(0,t),s.push(l)}return s}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new c.Box3))),this.geometry=e}refit(e=null){let t,n,r,o;e&&Array.isArray(e)&&(e=new Set(e));let i=this.geometry,s=i.index.array,a=i.attributes.position,l=0,u=this._roots;for(let i=0,c=u.length;i<c;i++)t=u[i],n=new Uint32Array(t),r=new Uint16Array(t),o=new Float32Array(t),function t(i,l,u=!1){let c=2*i;if(65535===r[c+15]){let e=n[i+6],t=r[c+14],l=1/0,u=1/0,f=1/0,d=-1/0,p=-1/0,h=-1/0;for(let n=3*e,r=3*(e+t);n<r;n++){let e=s[n],t=a.getX(e),r=a.getY(e),o=a.getZ(e);t<l&&(l=t),t>d&&(d=t),r<u&&(u=r),r>p&&(p=r),o<f&&(f=o),o>h&&(h=o)}return(o[i+0]!==l||o[i+1]!==u||o[i+2]!==f||o[i+3]!==d||o[i+4]!==p||o[i+5]!==h)&&(o[i+0]=l,o[i+1]=u,o[i+2]=f,o[i+3]=d,o[i+4]=p,o[i+5]=h,!0)}{let r=i+8,s=n[i+6],a=u,c=!1,f=!1;e?a||(c=e.has(r+l),f=e.has(s+l),a=!c&&!f):(c=!0,f=!0);let d=a||c,p=a||f,h=!1;d&&(h=t(r,l,a));let y=!1;p&&(y=t(s,l,a));let m=h||y;if(m)for(let e=0;e<3;e++){let t=r+e,n=s+e,a=o[t],l=o[t+3],u=o[n],c=o[n+3];o[i+e]=a<u?a:u,o[i+e+3]=l>c?l:c}return m}}(0,l),l+=t.byteLength}traverse(e,t=0){let n=this._roots[t],r=new Uint32Array(n),o=new Uint16Array(n);!function t(i,s=0){let a=2*i,l=65535===o[a+15];if(l){let t=r[i+6],u=o[a+14];e(s,l,new Float32Array(n,4*i,6),t,u)}else{let o=r[i+6],a=r[i+7];e(s,l,new Float32Array(n,4*i,6),a)||(t(i+8,s+1),t(o,s+1))}}(0)}raycast(e,t=c.FrontSide){let n=this._roots,r=this.geometry,a=[],l=t.isMaterial,u=Array.isArray(t),f=r.groups,d=l?t.side:t;for(let l=0,c=n.length;l<c;l++){let c=u?t[f[l].materialIndex].side:d,p=a.length;if($(n[l]),!function e(t,n,r,a,l){let u=2*t,c=o,f=i,d=s;if(z(u,f))!function(e,t,n,r,o,i){for(let s=r,a=r+o;s<a;s++)b(e,t,n,s,i)}(n,r,a,d[t+6],f[u+14],l);else{let o=t+8;X(o,c,a,D)&&e(o,n,r,a,l);let i=d[t+6];X(i,c,a,D)&&e(i,n,r,a,l)}}(0,r,c,e,a),Z(),u){let e=f[l].materialIndex;for(let t=p,n=a.length;t<n;t++)a[t].face.materialIndex=e}}return a}raycastFirst(e,t=c.FrontSide){let n=this._roots,r=this.geometry,a=t.isMaterial,l=Array.isArray(t),u=null,f=r.groups,d=a?t.side:t;for(let a=0,c=n.length;a<c;a++){let c=l?t[f[a].materialIndex].side:d;$(n[a]);let p=function e(t,n,r,a){let l=2*t,u=o,c=i,f=s;if(z(l,c))return function(e,t,n,r,o){let i=1/0,s=null;for(let a=r,l=r+o;a<l;a++){let r=b(e,t,n,a);r&&r.distance<i&&(s=r,i=r.distance)}return s}(n,r,a,f[t+6],c[l+14]);{let o,i;let s=f[t+7],l=W[s],c=a.direction[l]>=0;c?(o=t+8,i=f[t+6]):(o=f[t+6],i=t+8);let d=X(o,u,a,D)?e(o,n,r,a):null;if(d){let e=d.point[l];if(c?e<=u[i+s]:e>=u[i+s+3])return d}let p=X(i,u,a,D)?e(i,n,r,a):null;return d&&p?d.distance<=p.distance?d:p:d||p||null}}(0,r,c,e);Z(),null!=p&&(null==u||p.distance<u.distance)&&(u=p,l&&(p.face.materialIndex=f[a].materialIndex))}return u}intersectsGeometry(e,t){let n=this.geometry,r=!1;for(let o of this._roots)if($(o),r=K(0,n,e,t),Z(),r)break;return r}shapecast(e,t,n){let r=this.geometry;if(e instanceof Function){if(t){let e=t;t=(t,n,r,o)=>{let i=3*n;return e(t,i,i+1,i+2,r,o)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let o=eu.getPrimitive(),{boundsTraverseOrder:i,intersectsBounds:s,intersectsRange:a,intersectsTriangle:l}=e;if(a&&l){let e=a;a=(t,n,i,s,a)=>!!e(t,n,i,s,a)||k(t,n,r,l,i,s,o)}else a||(a=l?(e,t,n,i)=>k(e,t,r,l,n,i,o):(e,t,n)=>n);let u=!1,c=0;for(let e of this._roots){if($(e),u=H(0,r,s,a,i,c),Z(),u)break;c+=e.byteLength}return eu.releasePrimitive(o),u}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:o}=n,i=this.geometry.index,s=this.geometry.attributes.position,a=e.geometry.index,l=e.geometry.attributes.position;ee.copy(t).invert();let u=eu.getPrimitive(),c=eu.getPrimitive();if(o){function f(e,n,r,f,d,p,h,y){for(let m=r,g=r+f;m<g;m++){N(c,3*m,a,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(N(u,3*t,i,s),u.needsUpdate=!0,o(u,c,t,m,d,p,h,y))return!0}return!1}if(r){let e=r;r=function(t,n,r,o,i,s,a,l){return!!e(t,n,r,o,i,s,a,l)||f(t,n,r,o,i,s,a,l)}}else r=f}e.getBoundingBox(J),J.applyMatrix4(t);let d=this.shapecast({intersectsBounds:e=>J.intersectsBox(e),intersectsRange:(t,n,o,i,s,a)=>(Q.copy(a),Q.applyMatrix4(ee),e.shapecast({intersectsBounds:e=>Q.intersectsBox(e),intersectsRange:(e,o,a,l,u)=>r(t,n,e,o,i,s,l,u)}))});return eu.releasePrimitive(u),eu.releasePrimitive(c),d}intersectsBox(e,t){return et.set(e.min,e.max,t),et.needsUpdate=!0,this.shapecast({intersectsBounds:e=>et.intersectsBox(e),intersectsTriangle:e=>et.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},r={},o=0,i=1/0){e.boundingBox||e.computeBoundingBox(),et.set(e.boundingBox.min,e.boundingBox.max,t),et.needsUpdate=!0;let s=this.geometry,a=s.attributes.position,l=s.index,u=e.attributes.position,c=e.index,f=eu.getPrimitive(),d=eu.getPrimitive(),p=null,h=null;r&&(p=es,h=ea);let y=1/0,m=null,g=null;return(ee.copy(t).invert(),en.matrix.copy(ee),this.shapecast({boundsTraverseOrder:e=>et.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<i&&(t&&(en.min.copy(e.min),en.max.copy(e.max),en.needsUpdate=!0),!0),intersectsRange:(n,r)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:e=>en.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<i,intersectsRange:(e,i)=>{for(let s=3*e,x=(e+i)*3;s<x;s+=3){N(d,s,c,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let e=3*n,t=(n+r)*3;e<t;e+=3){N(f,e,l,a),f.needsUpdate=!0;let t=f.distanceToTriangle(d,eo,p);if(t<y&&(ei.copy(eo),h&&h.copy(p),y=t,m=e/3,g=s/3),t<o)return!0}}}});{let e=c?c.count:u.count;for(let i=0;i<e;i+=3){N(d,i,c,u),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let e=3*n,t=(n+r)*3;e<t;e+=3){N(f,e,l,a),f.needsUpdate=!0;let t=f.distanceToTriangle(d,eo,p);if(t<y&&(ei.copy(eo),h&&h.copy(p),y=t,m=e/3,g=i/3),t<o)return!0}}}}}),eu.releasePrimitive(f),eu.releasePrimitive(d),y===1/0)?null:(n.point?n.point.copy(ei):n.point=ei.clone(),n.distance=y,n.faceIndex=m,r&&(r.point?r.point.copy(h):r.point=h.clone(),r.point.applyMatrix4(ee),ei.applyMatrix4(ee),r.distance=ei.sub(r.point).length(),r.faceIndex=g),n)}closestPointToPoint(e,t={},n=0,r=1/0){let o=n*n,i=r*r,s=1/0,a=null;if(this.shapecast({boundsTraverseOrder:t=>(er.copy(e).clamp(t.min,t.max),er.distanceToSquared(e)),intersectsBounds:(e,t,n)=>n<s&&n<i,intersectsTriangle:(t,n)=>{t.closestPointToPoint(e,er);let r=e.distanceToSquared(er);return r<s&&(eo.copy(er),s=r,a=n),r<o}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy(eo):t.point=eo.clone(),t.distance=l,t.faceIndex=a,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{v(0,new Float32Array(t),el),e.union(el)}),e}}let ef=new c.Ray,ed=new c.Matrix4,ep=c.Mesh.prototype.raycast;function eh(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;ed.copy(this.matrixWorld).invert(),ef.copy(e.ray).applyMatrix4(ed);let n=this.geometry.boundsTree;if(!0===e.firstHitOnly){let r=w(n.raycastFirst(ef,this.material),this,e);r&&t.push(r)}else{let r=n.raycast(ef,this.material);for(let n=0,o=r.length;n<o;n++){let o=w(r[n],this,e);o&&t.push(o)}}}else ep.call(this,e,t)}function ey(e){return this.boundsTree=new ec(this,e),this.boundsTree}function em(){this.boundsTree=null}let eg=e=>e.isMesh,ex=u.forwardRef(({enabled:e=!0,firstHitOnly:t=!1,children:n,strategy:r=f,verbose:o=!1,setBoundingBox:i=!0,maxDepth:s=40,maxLeafTris:d=10,...p},h)=>{let y=u.useRef(null),m=(0,l.z)(e=>e.raycaster);return u.useImperativeHandle(h,()=>y.current,[]),u.useEffect(()=>{if(e){let e={strategy:r,verbose:o,setBoundingBox:i,maxDepth:s,maxLeafTris:d},n=y.current;return m.firstHitOnly=t,n.traverse(t=>{eg(t)&&!t.geometry.boundsTree&&t.raycast===c.Mesh.prototype.raycast&&(t.raycast=eh,t.geometry.computeBoundsTree=ey,t.geometry.disposeBoundsTree=em,t.geometry.computeBoundsTree(e))}),()=>{delete m.firstHitOnly,n.traverse(e=>{eg(e)&&e.geometry.boundsTree&&(e.geometry.disposeBoundsTree(),e.raycast=c.Mesh.prototype.raycast)})}}}),u.createElement("group",(0,a.Z)({ref:y},p),n)})},2956:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return r}}),n(2139);let r=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6406:function(e,t,n){function r(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return r}}),n(2139),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5250:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return x}});let r=n(1024)._(n(2265)),o=n(4542),i=n(7434),s=n(1030),a=n(6874),l=n(2956),u=n(6993),c=n(8599),f=n(5291),d=n(6406),p=n(5786),h=n(1414),y=new Set;function m(e,t,n,r,o,s){if(s||(0,i.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let o=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(y.has(o))return;y.add(o)}Promise.resolve(s?e.prefetch(t,o):e.prefetch(t,n,r)).catch(e=>{})}}function g(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}let x=r.default.forwardRef(function(e,t){let n,s;let{href:y,as:x,children:b,prefetch:w=null,passHref:P,replace:v,shallow:T,scroll:B,locale:M,onClick:S,onMouseEnter:_,onTouchStart:A,legacyBehavior:R=!1,...O}=e;n=b,R&&("string"==typeof n||"number"==typeof n)&&(n=r.default.createElement("a",null,n));let E=r.default.useContext(u.RouterContext),j=r.default.useContext(c.AppRouterContext),U=null!=E?E:j,V=!E,C=!1!==w,I=null===w?h.PrefetchKind.AUTO:h.PrefetchKind.FULL,{href:F,as:N}=r.default.useMemo(()=>{if(!E){let e=g(y);return{href:e,as:x?g(x):e}}let[e,t]=(0,o.resolveHref)(E,y,!0);return{href:e,as:x?(0,o.resolveHref)(E,x):t||e}},[E,y,x]),k=r.default.useRef(F),L=r.default.useRef(N);R&&(s=r.default.Children.only(n));let z=R?s&&"object"==typeof s&&s.ref:t,[q,D,W]=(0,f.useIntersection)({rootMargin:"200px"}),H=r.default.useCallback(e=>{(L.current!==N||k.current!==F)&&(W(),L.current=N,k.current=F),q(e),z&&("function"==typeof z?z(e):"object"==typeof z&&(z.current=e))},[N,z,F,W,q]);r.default.useEffect(()=>{U&&D&&C&&m(U,F,N,{locale:M},{kind:I},V)},[N,F,D,M,C,null==E?void 0:E.locale,U,V,I]);let K={ref:H,onClick(e){R||"function"!=typeof S||S(e),R&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),U&&!e.defaultPrevented&&function(e,t,n,o,s,a,l,u,c){let{nodeName:f}=e.currentTarget;if("A"===f.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!c&&!(0,i.isLocalURL)(n)))return;e.preventDefault();let d=()=>{let e=null==l||l;"beforePopState"in t?t[s?"replace":"push"](n,o,{shallow:a,locale:u,scroll:e}):t[s?"replace":"push"](o||n,{scroll:e})};c?r.default.startTransition(d):d()}(e,U,F,N,v,T,B,M,V)},onMouseEnter(e){R||"function"!=typeof _||_(e),R&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),U&&(C||!V)&&m(U,F,N,{locale:M,priority:!0,bypassPrefetchedCheck:!0},{kind:I},V)},onTouchStart(e){R||"function"!=typeof A||A(e),R&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),U&&(C||!V)&&m(U,F,N,{locale:M,priority:!0,bypassPrefetchedCheck:!0},{kind:I},V)}};if((0,a.isAbsoluteUrl)(N))K.href=N;else if(!R||P||"a"===s.type&&!("href"in s.props)){let e=void 0!==M?M:null==E?void 0:E.locale,t=(null==E?void 0:E.isLocaleDomain)&&(0,d.getDomainLocale)(N,e,null==E?void 0:E.locales,null==E?void 0:E.domainLocales);K.href=t||(0,p.addBasePath)((0,l.addLocale)(N,e,null==E?void 0:E.defaultLocale))}return R?r.default.cloneElement(s,K):r.default.createElement("a",{...O,...K},n)});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2185:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{requestIdleCallback:function(){return n},cancelIdleCallback:function(){return r}});let n="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},r="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4542:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return f}});let r=n(5770),o=n(1030),i=n(4544),s=n(6874),a=n(2139),l=n(7434),u=n(2360),c=n(6735);function f(e,t,n){let f;let d="string"==typeof t?t:(0,o.formatWithValidation)(t),p=d.match(/^[a-zA-Z]{1,}:\/\//),h=p?d.slice(p[0].length):d;if((h.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+d+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let t=(0,s.normalizeRepeatedSlashes)(h);d=(p?p[0]:"")+t}if(!(0,l.isLocalURL)(d))return n?[d]:d;try{f=new URL(d.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){f=new URL("/","http://n")}try{let e=new URL(d,f);e.pathname=(0,a.normalizePathTrailingSlash)(e.pathname);let t="";if((0,u.isDynamicRoute)(e.pathname)&&e.searchParams&&n){let n=(0,r.searchParamsToUrlQuery)(e.searchParams),{result:s,params:a}=(0,c.interpolateAs)(e.pathname,e.pathname,n);s&&(t=(0,o.formatWithValidation)({pathname:s,hash:e.hash,query:(0,i.omit)(n,a)}))}let s=e.origin===f.origin?e.href.slice(e.origin.length):e.href;return n?[s,t||s]:s}catch(e){return n?[d]:d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5291:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return l}});let r=n(2265),o=n(2185),i="function"==typeof IntersectionObserver,s=new Map,a=[];function l(e){let{rootRef:t,rootMargin:n,disabled:l}=e,u=l||!i,[c,f]=(0,r.useState)(!1),d=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{d.current=e},[]);return(0,r.useEffect)(()=>{if(i){if(u||c)return;let e=d.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:o,elements:i}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=a.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let o=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=o.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:o},a.push(n),s.set(n,t),t}(n);return i.set(e,t),o.observe(e),function(){if(i.delete(e),o.unobserve(e),0===i.size){o.disconnect(),s.delete(r);let e=a.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&f(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!c){let e=(0,o.requestIdleCallback)(()=>f(!0));return()=>(0,o.cancelIdleCallback)(e)}},[u,n,t,c,d.current]),[p,c,(0,r.useCallback)(()=>{f(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2202:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return o}});let n=/[|\\{}()[\]^$+*?.-]/,r=/[|\\{}()[\]^$+*?.-]/g;function o(e){return n.test(e)?e.replace(r,"\\$&"):e}},6993:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=n(1024)._(n(2265)).default.createContext(null)},1030:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{formatUrl:function(){return i},urlObjectKeys:function(){return s},formatWithValidation:function(){return a}});let r=n(8533)._(n(5770)),o=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:n}=e,i=e.protocol||"",s=e.pathname||"",a=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:n&&(u=t+(~n.indexOf(":")?"["+n+"]":n),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(r.urlQueryToSearchParams(l)));let c=e.search||l&&"?"+l||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||o.test(i))&&!1!==u?(u="//"+(u||""),s&&"/"!==s[0]&&(s="/"+s)):u||(u=""),a&&"#"!==a[0]&&(a="#"+a),c&&"?"!==c[0]&&(c="?"+c),""+i+u+(s=s.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+a}let s=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function a(e){return i(e)}},2360:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getSortedRoutes:function(){return r.getSortedRoutes},isDynamicRoute:function(){return o.isDynamicRoute}});let r=n(7409),o=n(1305)},6735:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return i}});let r=n(2395),o=n(9935);function i(e,t,n){let i="",s=(0,o.getRouteRegex)(e),a=s.groups,l=(t!==e?(0,r.getRouteMatcher)(s)(t):"")||n;i=e;let u=Object.keys(a);return u.every(e=>{let t=l[e]||"",{repeat:n,optional:r}=a[e],o="["+(n?"...":"")+e+"]";return r&&(o=(t?"":"/")+"["+o+"]"),n&&!Array.isArray(t)&&(t=[t]),(r||e in l)&&(i=i.replace(o,n?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(i=""),{params:u,result:i}}},1305:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return i}});let r=n(4507),o=/\/\[[^/]+?\](?=\/|$)/;function i(e){return(0,r.isInterceptionRouteAppPath)(e)&&(e=(0,r.extractInterceptionRouteInformation)(e).interceptedRoute),o.test(e)}},7434:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return i}});let r=n(6874),o=n(7379);function i(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),n=new URL(e,t);return n.origin===t&&(0,o.hasBasePath)(n.pathname)}catch(e){return!1}}},4544:function(e,t){function n(e,t){let n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return n}})},5770:function(e,t){function n(e){let t={};return e.forEach((e,n)=>{void 0===t[n]?t[n]=e:Array.isArray(t[n])?t[n].push(e):t[n]=[t[n],e]}),t}function r(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[n,o]=e;Array.isArray(o)?o.forEach(e=>t.append(n,r(e))):t.set(n,r(o))}),t}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,n)=>e.append(n,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o},assign:function(){return i}})},2395:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return o}});let r=n(6874);function o(e){let{re:t,groups:n}=e;return e=>{let o=t.exec(e);if(!o)return!1;let i=e=>{try{return decodeURIComponent(e)}catch(e){throw new r.DecodeError("failed to decode param")}},s={};return Object.keys(n).forEach(e=>{let t=n[e],r=o[t.pos];void 0!==r&&(s[e]=~r.indexOf("/")?r.split("/").map(e=>i(e)):t.repeat?[i(r)]:i(r))}),s}}},9935:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getRouteRegex:function(){return l},getNamedRouteRegex:function(){return f},getNamedMiddlewareRegex:function(){return d}});let r=n(4507),o=n(2202),i=n(5868);function s(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let n=e.startsWith("...");return n&&(e=e.slice(3)),{key:e,repeat:n,optional:t}}function a(e){let t=(0,i.removeTrailingSlash)(e).slice(1).split("/"),n={},a=1;return{parameterizedRoute:t.map(e=>{let t=r.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),i=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&i){let{key:e,optional:r,repeat:l}=s(i[1]);return n[e]={pos:a++,repeat:l,optional:r},"/"+(0,o.escapeStringRegexp)(t)+"([^/]+?)"}if(!i)return"/"+(0,o.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:r}=s(i[1]);return n[e]={pos:a++,repeat:t,optional:r},t?r?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:n}}function l(e){let{parameterizedRoute:t,groups:n}=a(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:n}}function u(e){let{interceptionMarker:t,getSafeRouteKey:n,segment:r,routeKeys:i,keyPrefix:a}=e,{key:l,optional:u,repeat:c}=s(r),f=l.replace(/\W/g,"");a&&(f=""+a+f);let d=!1;(0===f.length||f.length>30)&&(d=!0),isNaN(parseInt(f.slice(0,1)))||(d=!0),d&&(f=n()),a?i[f]=""+a+l:i[f]=l;let p=t?(0,o.escapeStringRegexp)(t):"";return c?u?"(?:/"+p+"(?<"+f+">.+?))?":"/"+p+"(?<"+f+">.+?)":"/"+p+"(?<"+f+">[^/]+?)"}function c(e,t){let n;let s=(0,i.removeTrailingSlash)(e).slice(1).split("/"),a=(n=0,()=>{let e="",t=++n;for(;t>0;)e+=String.fromCharCode(97+(t-1)%26),t=Math.floor((t-1)/26);return e}),l={};return{namedParameterizedRoute:s.map(e=>{let n=r.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),i=e.match(/\[((?:\[.*\])|.+)\]/);if(n&&i){let[n]=e.split(i[0]);return u({getSafeRouteKey:a,interceptionMarker:n,segment:i[1],routeKeys:l,keyPrefix:t?"nxtI":void 0})}return i?u({getSafeRouteKey:a,segment:i[1],routeKeys:l,keyPrefix:t?"nxtP":void 0}):"/"+(0,o.escapeStringRegexp)(e)}).join(""),routeKeys:l}}function f(e,t){let n=c(e,t);return{...l(e),namedRegex:"^"+n.namedParameterizedRoute+"(?:/)?$",routeKeys:n.routeKeys}}function d(e,t){let{parameterizedRoute:n}=a(e),{catchAll:r=!0}=t;if("/"===n)return{namedRegex:"^/"+(r?".*":"")+"$"};let{namedParameterizedRoute:o}=c(e,!1);return{namedRegex:"^"+o+(r?"(?:(/.*)?)":"")+"$"}}},7409:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return r}});class n{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let n=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&n.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');n.unshift(t)}return null!==this.restSlugName&&n.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&n.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),n}_insert(e,t,r){if(0===e.length){this.placeholder=!1;return}if(r)throw Error("Catch-all must be the last part of the URL.");let o=e[0];if(o.startsWith("[")&&o.endsWith("]")){let n=o.slice(1,-1),s=!1;if(n.startsWith("[")&&n.endsWith("]")&&(n=n.slice(1,-1),s=!0),n.startsWith("...")&&(n=n.substring(3),r=!0),n.startsWith("[")||n.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+n+"').");if(n.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+n+"').");function i(e,n){if(null!==e&&e!==n)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+n+"').");t.forEach(e=>{if(e===n)throw Error('You cannot have the same slug name "'+n+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===o.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+n+'" differ only by non-word symbols within a single dynamic path')}),t.push(n)}if(r){if(s){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');i(this.optionalRestSlugName,n),this.optionalRestSlugName=n,o="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');i(this.restSlugName,n),this.restSlugName=n,o="[...]"}}else{if(s)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');i(this.slugName,n),this.slugName=n,o="[]"}}this.children.has(o)||this.children.set(o,new n),this.children.get(o)._insert(e.slice(1),t,r)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function r(e){let t=new n;return e.forEach(e=>t.insert(e)),t.smoosh()}},6874:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{WEB_VITALS:function(){return n},execOnce:function(){return r},isAbsoluteUrl:function(){return i},getLocationOrigin:function(){return s},getURL:function(){return a},getDisplayName:function(){return l},isResSent:function(){return u},normalizeRepeatedSlashes:function(){return c},loadGetInitialProps:function(){return f},SP:function(){return d},ST:function(){return p},DecodeError:function(){return h},NormalizeError:function(){return y},PageNotFoundError:function(){return m},MissingStaticPage:function(){return g},MiddlewareNotFoundError:function(){return x},stringifyError:function(){return b}});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function r(e){let t,n=!1;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n||(n=!0,t=e(...o)),t}}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function s(){let{protocol:e,hostname:t,port:n}=window.location;return e+"//"+t+(n?":"+n:"")}function a(){let{href:e}=window.location,t=s();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function f(e,t){let n=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(n&&u(n))return r;if(!r)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+r+'" instead.');return r}let d="undefined"!=typeof performance,p=d&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class h extends Error{}class y extends Error{}class m extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class g extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class x extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}}}]);